<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Investors - Sneaky Business</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    /* Responsive switch */
    @media (max-width: 768px) {
      table {
        display: none;
      }
      .card-container {
        display: block;
      }
    }
    @media (min-width: 769px) {
      .card-container {
        display: none;
      }
      table {
        display: table;
      }
    }
  </style>
</head>
<body class="bg-gray-900 text-white min-h-screen font-sans">

  <div class="max-w-6xl mx-auto flex flex-col px-6 py-10">

    <!-- Header -->
    <h1 class="flex items-center space-x-4 text-4xl font-bold mb-6 text-indigo-400">
      <img src="../images/b.jpg" alt="logo" class="mt-1 rounded-md h-8 w-8" />
      <span>Investors</span>
    </h1>

    <!-- Search box -->
    <div class="mb-6">
      <input 
        type="text" 
        id="searchId" 
        placeholder="Search by ID..." 
        class="w-full md:w-64 p-2 rounded border border-gray-600 bg-gray-800 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500"
      />
    </div>

    <!-- Table container -->
    <div class="overflow-x-auto bg-gray-800 rounded-lg shadow-lg">
      <table class="min-w-full text-sm" id="investorTable">
        <thead>
          <tr class="text-gray-300 bg-gray-700 border-b border-gray-600">
            <th class="text-left px-4 py-3">ID</th>
            <th class="text-left px-6 py-3">Name</th>
            <th class="text-left px-6 py-3">Email</th>
            <th class="text-left px-6 py-3">Amount Invested</th>
            <th class="text-left px-6 py-3">Date</th>
            <th class="text-left px-6 py-3">Status</th>
            <th class="text-left px-6 py-3">Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Data inserted dynamically by JS -->
        </tbody>
      </table>
    </div>

    <!-- Card view container for mobile -->
    <div class="card-container space-y-6 mt-6" id="investorCards">
      <!-- Cards added dynamically by JS -->
    </div>

    <div class="mt-6">
      <a href="dashboard.html" class="text-indigo-400 hover:underline">‚Üê Back to Dashboard</a>
    </div>
  </div>

  <script>
    // Sample data with ID added
    let investors = [
      {
        id: "INV001",
        name: "Alice Johnson",
        email: "alice@example.com",
        amount: 5000,
        date: "Aug 2, 2025",
        status: "Active"
      },
      {
        id: "INV002",
        name: "David Kim",
        email: "david@example.com",
        amount: 3500,
        date: "Jul 28, 2025",
        status: "Pending"
      },
      {
        id: "INV003",
        name: "Sara Lee",
        email: "sara@example.com",
        amount: 2000,
        date: "Jul 15, 2025",
        status: "Closed"
      }
    ];

    const statusColors = {
      Active: "text-green-400",
      Pending: "text-yellow-400",
      Closed: "text-red-400"
    };

    function formatAmount(num) {
      return "$" + num.toLocaleString();
    }

    // Render table rows based on provided list
    function renderTable(filteredList) {
      const tbody = document.querySelector("#investorTable tbody");
      tbody.innerHTML = ""; // Clear existing

      if(filteredList.length === 0) {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td colspan="7" class="text-center py-4 text-gray-400">No investors found.</td>`;
        tbody.appendChild(tr);
        return;
      }

      filteredList.forEach(investor => {
        const tr = document.createElement("tr");
        tr.className = "border-b border-gray-700 hover:bg-gray-700/50 transition";

        tr.innerHTML = `
          <td class="px-4 py-4 font-mono">${investor.id}</td>
          <td class="px-6 py-4">${investor.name}</td>
          <td class="px-6 py-4">${investor.email}</td>
          <td class="px-6 py-4 font-semibold">${formatAmount(investor.amount)}</td>
          <td class="px-6 py-4">${investor.date}</td>
          <td class="px-6 py-4 ${statusColors[investor.status] || "text-gray-300"} font-medium">${investor.status}</td>
          <td class="px-6 py-4">
            <button 
              class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm font-semibold"
              onclick="deleteInvestor('${investor.id}')"
              aria-label="Delete ${investor.name}"
            >Delete</button>
          </td>
        `;

        tbody.appendChild(tr);
      });
    }

    // Render mobile cards based on provided list
    function renderCards(filteredList) {
      const container = document.getElementById("investorCards");
      container.innerHTML = ""; // Clear existing

      if(filteredList.length === 0) {
        container.innerHTML = `<p class="text-center text-gray-400">No investors found.</p>`;
        return;
      }

      filteredList.forEach(investor => {
        const card = document.createElement("div");
        card.className = "bg-gray-800 p-4 rounded-lg shadow-lg";

        card.innerHTML = `
          <p><strong>ID:</strong> <span class="font-mono">${investor.id}</span></p>
          <p><strong>Name:</strong> ${investor.name}</p>
          <p><strong>Email:</strong> ${investor.email}</p>
          <p><strong>Amount Invested:</strong> <span class="font-semibold">${formatAmount(investor.amount)}</span></p>
          <p><strong>Date:</strong> ${investor.date}</p>
          <p><strong>Status:</strong> <span class="${statusColors[investor.status] || "text-gray-300"} font-medium">${investor.status}</span></p>
          <button 
            class="mt-3 bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm font-semibold w-full"
            onclick="deleteInvestor('${investor.id}')"
            aria-label="Delete ${investor.name}"
          >Delete</button>
        `;

        container.appendChild(card);
      });
    }

    // Delete investor by ID
    function deleteInvestor(id) {
      if(confirm("Are you sure you want to delete this investor?")) {
        investors = investors.filter(inv => inv.id !== id);
        filterAndRender();
      }
    }

    // Search & render based on search input
    function filterAndRender() {
      const searchValue = document.getElementById('searchId').value.trim().toLowerCase();

      if(searchValue === "") {
        renderTable(investors);
        renderCards(investors);
      } else {
        const filtered = investors.filter(inv => inv.id.toLowerCase().includes(searchValue));
        renderTable(filtered);
        renderCards(filtered);
      }
    }

    // Attach event listener for search input
    document.getElementById('searchId').addEventListener('input', filterAndRender);

    // Initial render
    filterAndRender();
  </script>

</body>
</html>
